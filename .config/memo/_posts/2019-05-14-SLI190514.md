# SLI190514


一旦登録キューを入れるGMをいれる
登録キューにその後メッセージを入れて(userIDとか件数とか)
それをトリガーにホストアプリが起動


バックアウトループの処理に関する資料


トリガーモニターのマニュアルのリンク
v701の機能の説明資料（SIL?)のリンク
CICSのサンプル(マニュアルに記載がある恥ず)を探す:wq


----------------------------



トリガーモニターのマニュアルのリンク
- https://www.ibm.com/support/knowledgecenter/ja/SSFKSJ_9.0.0/com.ibm.mq.dev.doc/q026910_.htm
- https://www.ibm.com/support/knowledgecenter/ja/SSFKSJ_9.0.0/com.ibm.mq.dev.doc/q026930_.htm
-
v701の機能の説明資料（SIL?)のリンク
-	WebSphere MQ 機能と構成 3.主な機能 p42-43

CICSのサンプル(マニュアルに記載がある恥ず)を探す

---------
鈴木さん

お疲れ様です。佐藤賢一郎です。

5/14のミーティングでお話した内容と、Q2に関する回答をまとめましたので、ご確認ください。

よろしくお願いします。


先日、QMGR属性の"EXPRYINT"を設定する方法のCPUコストに関するご質問がありましたが、MP16 p59の記述を見る限りでは、大きくCPU負荷がかかるという記述はありませんでした。
また、EXPRYINTのタスクをQueueごとに実行する方法として
REFRESH QMGR TYPE(EXPIRY) NAME(Qname)
が挙げられていましたので、こちらの方法もご検討ください。




Q２に関して


滞留に関しては応答キューに関してはQ１と同様です。
登録キュー、起動キューに関しては、expiryがunlimited persistenceがpersistentなので、登録処理のトランザクションの異常終了等で滞留が発生する可能性があり、その場合には個々に原因の調査が必要となります。

また、トリガーモニターに関しては使用を以下の理由から推奨いたしません。
- トリガーの条件が14あり、更にその中で条件分岐するものや、他の条件が前提となるものもあり非常に複雑です。問題判別の際、トリガーが多重起動、もしくは起動しなかった理由がどの条件であるかを判別するのはとても難解です。
- トリガーの条件を適切に設定できなかった場合、バックアウトループが発生し、CPU圧迫を起こす可能性があります。
	-	例えば、キューにメッセージが入る事によるトリガー起動で、アプリケーションがメッセージgetします。そのメッセージに不備があり、バックアウトした場合、キューに再度同様のメッセージが入り、トリガーが起動し、再度アプリケーションが起動します。

- トリガーモニターの使用は、不定期かつ稀有なイベントに対して使用すると、CPUコストを削減できます。断続的に処理が発生するのであれば、常駐アプリでの処理で問題ないと思われます。

トリガーモニターの参考となる資料を添付いたしますので、ご確認の上ご判断ください。

トリガーによる IBM MQ アプリケーションの開始
- https://www.ibm.com/support/knowledgecenter/ja/SSFKSJ_9.0.0/com.ibm.mq.dev.doc/q026910_.htm
トリガー・イベントの条件
- https://www.ibm.com/support/knowledgecenter/ja/SSFKSJ_9.0.0/com.ibm.mq.dev.doc/q026930_.htm

v701の機能の説明資料（SIL?)のリンク
-	WebSphere MQ 機能と構成 3.主な機能 p42-43


MQ-CICSアプリケーションの構成で、MQのトリガーモニターを使わない構成としては、スタート型と常駐型があります。
詳細は添付します資料にありますので、ご確認のください。

MQ-CICSのサンプルコードについては確認中ですのでお待ち下さい。


トリガーが発生しなかったとき、発生しすぎたときにどの条件が問題だったかを判別するのが大変
バックアウトループの例を説明する

トリガーモニタの常駐ではなくユーザーアプリの常駐もある



サンプルは確認中
